---
import BaseLayout from '../layouts/BaseLayout.astro';
import AppCard from '../components/AppCard.astro';
import FlowMotif from '../components/FlowMotif.astro';
import WaitlistForm from '../components/WaitlistForm.astro';
import { getCopy } from '../i18n/copy';
import { pathFor, type Locale, withBase } from '../i18n/utils';

interface Props {
  locale: Locale;
  path: string;
}

const { locale, path } = Astro.props;
const t = getCopy(locale);
---

<BaseLayout title={t.meta.siteName} description={t.meta.description} locale={locale} path={path}>
  <section class="hero shell">
    <div class="hero-copy">
      <p class="eyebrow">{t.hero.eyebrow}</p>
      <h1>{t.hero.title}</h1>
      <p class="lead">{t.hero.tagline}</p>
      <div class="hero-cta">
        <a class="btn btn-primary" href={withBase(pathFor(locale, 'apps'))}>{t.hero.primaryCta}</a>
        <a class="btn btn-secondary" href={`#${t.story.id}`}>{t.hero.secondaryCta}</a>
      </div>
      <p class="calm-note">{t.hero.calmNote}</p>
    </div>
    <div class="hero-art" aria-hidden="true">
      <FlowMotif kind="wave" />
      <FlowMotif kind="rings" />
    </div>
  </section>

  <section class="shell story" id={t.story.id}>
    <div class="section-intro">
      <p class="eyebrow">{locale === 'zh' ? '品牌故事' : 'Brand Story'}</p>
      <h2>{t.story.title}</h2>
      <p>{t.story.intro}</p>
    </div>
    <div class="story-grid">
      {t.story.blocks.map((block) => (
        <article class="story-block card">
          <h3>{block.title}</h3>
          {block.body.map((paragraph) => <p>{paragraph}</p>)}
        </article>
      ))}
    </div>
    <blockquote class="quote card">
      <p>{t.story.quote}</p>
    </blockquote>
  </section>

  <section class="shell">
    <div class="section-intro">
      <p class="eyebrow">{locale === 'zh' ? '设计原则' : 'Principles'}</p>
      <h2>{t.principles.title}</h2>
      <p>{t.principles.intro}</p>
    </div>
    <div class="principle-grid">
      {t.principles.items.map((item) => (
        <article class="card principle-card">
          <p class="principle-icon" aria-hidden="true">{item.icon}</p>
          <h3>{item.title}</h3>
          <p>{item.body}</p>
        </article>
      ))}
    </div>
  </section>

  <section class="shell" aria-labelledby="apps-showcase-title">
    <div class="section-intro">
      <p class="eyebrow">{locale === 'zh' ? '产品方向' : 'Products'}</p>
      <h2 id="apps-showcase-title">{t.apps.title}</h2>
      <p>{t.apps.intro}</p>
    </div>
    <div class="app-grid">
      {t.apps.items.map((app) => (
        <AppCard
          app={app}
          locale={locale}
          badgeComing={t.apps.badgeComing}
          badgeProgress={t.apps.badgeProgress}
          learnMore={t.apps.learnMore}
        />
      ))}
    </div>
  </section>

  <section class="shell">
    <WaitlistForm locale={locale} />
  </section>
</BaseLayout>
